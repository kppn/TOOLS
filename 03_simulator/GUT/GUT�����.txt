TO:小山さん、野澤さん
FM:近藤

近藤が死んだらメンテお願いします。



■TCP/IPスタックで普通に通信

   +--------------+
   | pingプロセス |
   +--------------+
          | write()
          |
          |   カーネル
   +------|-------+
   |      |       | 
   | Routing Table|
   |      |       |
   |      |       |
   |    eth1      | 
   |      |       |
   |      |       |
   | device driver|
   |      |       |
   +------|-------+
          _
   +--------------+
   | NIC Card     |
   +--------------+



■TUN/TAPでユーザランドVPN

   +--------------+      +------------+
   | pingプロセス |      | VPN Appl   |
   +--------------+      +------------+
          | write()             ^
          |                     | read()
          |   カーネル          |
   +------|-------+             |
   |      |       |             |
   | Routing Table|             |
   |      |       |             |
   |      |       |             |
   |    tunX -------------------+
   |              |
   +--------------+

  ユーザプロセスでtun/tapデバイスを開くと、仮想の物理I/Fが出来る。
  この仮想I/Fへwriteしたパケットはユーザプロセス(VPNアプリ)でread
  できる。
  ユーザプロセスで受け取った後は、GTPなり他のトンネルプロトコルなり
  好きに包んで、それを対向のトンネルpeerへ普通に投げれば良い。
  受信はこの逆。



http://ja.wikipedia.org/wiki/TUN/TAP
http://www.kernel.org/pub/linux/kernel/people/marcelo/linux-2.4/Documentation/networking/tuntap.txt



============================================================
NEC 
   近藤 隆司
   
   Tel       : 046-847-6127
   Mail      : kondo.tkh@cnt.ncos.nec.co.jp
============================================================
